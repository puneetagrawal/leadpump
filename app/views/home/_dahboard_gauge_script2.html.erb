<script type="text/javascript">
$(document).ready(function () {
    initgauge1();
});

function initgauge1(){
    var project = "<%=@project.present? ? 'true' : 'false'%>";
    var eft = 0;
    var mem_sold = 0;
    var cash = 0;
    var cash = 0;
    var total_gross = 0;
    if(project == 'true'){
        eft = "<%=@gross_values['e_prjt'.to_sym]%>"; 
        mem_sold = "<%=@gross_values['m_prjt'.to_sym]%>";   
        cash = "<%=@gross_values['c_prjt'.to_sym]%>";
        total_gross = "<%=@gross_values['g_prjt'.to_sym]%>";
    }
    else{
        eft = "<%=@gross_values['g_eft'.to_sym]%>";
        mem_sold = "<%=@gross_values['g_mem'.to_sym]%>";
        cash = "<%=@gross_values['g_cash'.to_sym]%>";
        total_gross = "<%=@gross_values['g_gross'.to_sym]%>";
    }
    

    eft = getRange(eft, 'eft_scope');
    $('#eftgauge').jqxGauge('value', eft);
    $('#eftgauge').on('valueChanging', function (e) {
        $(this).siblings('.gaugeValue').text('$ ' + Math.round(count != 0 ? (e.args.value * count) : e.args.value));
    });

    
    mem_sold = mem_sold ? parseInt(mem_sold) : 0;
    $('#membersoldgauge').jqxGauge('value', mem_sold);
    $('#membersoldgauge').on('valueChanging', function (e) {
        $(this).siblings('.gaugeValue').text(Math.round(e.args.value));
    });
    

    cash = getRange(cash, 'cash_scope');
    $('#cashgauge').jqxGauge('value', cash)
    $('#cashgauge').on('valueChanging', function (e) {
        $(this).siblings('.gaugeValue').text('$ ' + Math.round(count != 0 ? (e.args.value * count) : e.args.value));
    });
     
    total_gross = getRange(total_gross, 'gross_scope');
    $('#totalgrossgauge').jqxGauge('value', total_gross);
    $('#totalgrossgauge').on('valueChanging', function (e) {
        $(this).siblings('.gaugeValue').text('$ ' + Math.round(count != 0 ? e.args.value * count : e.args.value));
    });

    var test = "<%=@leads.present? ? 'true' : 'false'%>"
    if(test == "true"){
        var lead = "<%=@leads%>";
        lead = lead != 0 ? parseInt(lead) : 0;
        $('#leadgauge').jqxGauge('value', lead);
        $('#leadgauge').on('valueChanging', function (e) {
            $(this).siblings('.gaugeValue').text(Math.round(e.args.value));
        });
    }
    
}

function getRange(no, id){
    no = no ? parseInt(no) : 0
    if(no >= 0 && no <= 100){
        value = no;
        count = 0;
    }
    else if(no > 100 && no <= 1000){
        value = no/10;
        $("#"+id).html('(in 100)')
        count = 10;
    }
    else if(no > 1000 && no <= 10000){
        value = no/100;
        $("#"+id).html('(in 1000)')
        count = 100;
    }   
    else{
        value = no/1000;
        $("#"+id).html('(in 10000)')
        count = 1000;
    }
    return value;
}
</script>
